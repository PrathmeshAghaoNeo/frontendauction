<div class="settings-container">

  <form [formGroup]="settingsForm" (ngSubmit)="onSubmit()" class="settings-form-grid">

    <!-- View Mode -->
    <div *ngIf="viewMode">
      <h2 class="text-primary">Settings</h2>

      <!-- Auction Settings -->
      <div formGroupName="auctionSettings" class="settings-form-section">
        <h3>Auction Settings</h3>
        <div class="settings-grid">
          <div class="form-group">
            <label for="globalIncrementalTimeInMinutes">Global Incremental Time (minutes):</label>
            <span>{{ settingsForm.get('auctionSettings.globalIncrementalTimeInMinutes')?.value }}</span>
          </div>
        </div>
      </div>

      <!-- Finance Settings -->
      <div formGroupName="financeSettings" class="settings-form-section">
        <h3>Finance Settings</h3>
        <div class="settings-grid">
          <div class="form-group" *ngFor="let field of ['vatPercent', 'creditCardFee', 'debitCardFee', 'adminFees', 'auctionFees', 'buyerCommissionPercent']">
            <label [for]="field">{{ field | titlecase }}:</label>
            <span>{{ settingsForm.get('financeSettings.' + field)?.value }}</span>
          </div>
        </div>
      </div>

      <!-- Direct Sale Settings -->
      <div formGroupName="directSaleSettings" class="settings-form-section">
        <h3>Direct Sale Settings</h3>
        <div class="settings-grid">
          <div class="form-group" *ngFor="let field of ['cartItemsLimit', 'cartTimerInMinutes']">
            <label [for]="field">{{ field | titlecase }}:</label>
            <span>{{ settingsForm.get('directSaleSettings.' + field)?.value }}</span>
          </div>
        </div>
      </div>

      <!-- Static Pages -->
      <div formGroupName="staticPages" class="settings-form-section">
        <h3>Static Pages</h3>
        <div class="settings-grid">
          <div class="form-group" *ngFor="let field of ['privacyPolicy', 'termsAndConditions', 'cookiesPolicy']">
            <label [for]="field">{{ field | titlecase }}:</label>
            <span>{{ settingsForm.get('staticPages.' + field)?.value }}</span>
          </div>
        </div>
      </div>

      <!-- Footer Links -->
      <div formGroupName="footerLinks" class="settings-form-section">
        <h3>Footer Links</h3>
        <div class="settings-grid">
          <div class="form-group" *ngFor="let field of ['faq', 'blog', 'status', 'twitterLink', 'instagramLink', 'facebookLink', 'linkedInLink', 'youTubeLink', 'appStoreLink', 'googlePlayLink']">
            <label [for]="field">{{ field | titlecase }}:</label>
            <span>{{ settingsForm.get('footerLinks.' + field)?.value }}</span>
          </div>
        </div>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-purple" (click)="editSettings()">Edit</button>
      </div>
    </div>

    <!-- Edit Mode -->
<div *ngIf="!viewMode">
  <h2 class="text-primary">Edit Settings</h2>

  <!-- Auction Settings -->
  <div formGroupName="auctionSettings" class="settings-form-section">
    <h3>Auction Settings</h3>
    <div class="settings-grid">
      <div class="form-group">
        <label for="globalIncrementalTimeInMinutes">Global Incremental Time (minutes):</label>
        <input id="globalIncrementalTimeInMinutes"
               formControlName="globalIncrementalTimeInMinutes"
               type="number"
               class="form-control"
               min="1"
               step="1">
        <div class="error" *ngIf="settingsForm.get('auctionSettings.globalIncrementalTimeInMinutes')?.touched && settingsForm.get('auctionSettings.globalIncrementalTimeInMinutes')?.invalid">
          <small *ngIf="settingsForm.get('auctionSettings.globalIncrementalTimeInMinutes')?.errors?.['required']">This field is required.</small>
          <small *ngIf="settingsForm.get('auctionSettings.globalIncrementalTimeInMinutes')?.errors?.['min']">Must be greater than 0.</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Finance Settings -->
  <div formGroupName="financeSettings" class="settings-form-section">
    <h3>Finance Settings</h3>
    <div class="settings-grid">
      <div class="form-group" *ngFor="let field of ['vatPercent', 'creditCardFee', 'debitCardFee', 'adminFees', 'auctionFees', 'buyerCommissionPercent']">
        <label [for]="field">{{ field | titlecase }}:</label>
        <input [id]="field"
               [formControlName]="field"
               type="number"
               class="form-control"
               min="1"
               step="1">
        <div class="error" *ngIf="settingsForm.get('financeSettings.' + field)?.touched && settingsForm.get('financeSettings.' + field)?.invalid">
          <small *ngIf="settingsForm.get('financeSettings.' + field)?.errors?.['required']">This field is required.</small>
          <small *ngIf="settingsForm.get('financeSettings.' + field)?.errors?.['min']">Must be greater than 0.</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Direct Sale Settings -->
  <div formGroupName="directSaleSettings" class="settings-form-section">
    <h3>Direct Sale Settings</h3>
    <div class="settings-grid">
      <div class="form-group" *ngFor="let field of ['cartItemsLimit', 'cartTimerInMinutes']">
        <label [for]="field">{{ field | titlecase }}:</label>
        <input [id]="field"
               [formControlName]="field"
               type="number"
               class="form-control"
               min="1"
               step="1">
        <div class="error" *ngIf="settingsForm.get('directSaleSettings.' + field)?.touched && settingsForm.get('directSaleSettings.' + field)?.invalid">
          <small *ngIf="settingsForm.get('directSaleSettings.' + field)?.errors?.['required']">This field is required.</small>
          <small *ngIf="settingsForm.get('directSaleSettings.' + field)?.errors?.['min']">Must be greater than 0.</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Static Pages -->
  <div formGroupName="staticPages" class="settings-form-section">
    <h3>Static Pages</h3>
    <div class="settings-grid">
      <div class="form-group" *ngFor="let field of ['privacyPolicy', 'termsAndConditions', 'cookiesPolicy']">
        <label [for]="field">{{ field | titlecase }}:</label>
        <textarea [id]="field"
                  [formControlName]="field"
                  class="form-control"
                  rows="4"></textarea>
        <div class="error" *ngIf="settingsForm.get('staticPages.' + field)?.touched && settingsForm.get('staticPages.' + field)?.invalid">
          <small *ngIf="settingsForm.get('staticPages.' + field)?.errors?.['required']">{{ field | titlecase }} is required.</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer Links -->
  <div formGroupName="footerLinks" class="settings-form-section">
    <h3>Footer Links</h3>
    <div class="settings-grid">
      <div class="form-group" *ngFor="let field of ['faq', 'blog', 'twitterLink', 'instagramLink', 'facebookLink', 'linkedInLink', 'youTubeLink', 'appStoreLink', 'googlePlayLink']">
        <label [for]="field">{{ field | titlecase }}:</label>
        <input [id]="field"
               [formControlName]="field"
               type="text"
               class="form-control">
        <div class="error" *ngIf="settingsForm.get('footerLinks.' + field)?.touched && settingsForm.get('footerLinks.' + field)?.invalid">
          <small *ngIf="settingsForm.get('footerLinks.' + field)?.errors?.['required']">This field is required.</small>
          <small *ngIf="settingsForm.get('footerLinks.' + field)?.errors?.['pattern']">Enter a valid URL (http/https).</small>
        </div>
      </div>

      <!-- Status Dropdown -->
      <div class="form-group">
        <label for="status">Status:</label>
        <select id="status" formControlName="status" class="form-control">
          <option value="" disabled>Select status</option>
          <option value="active">Active</option>
          <option value="inactive">Inactive</option>
        </select>
        <div class="error" *ngIf="settingsForm.get('footerLinks.status')?.touched && settingsForm.get('footerLinks.status')?.invalid">
          <small *ngIf="settingsForm.get('footerLinks.status')?.errors?.['required']">Status is required.</small>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="formSubmitAttempted && settingsForm.invalid" class="alert alert-danger">
  <strong>Some fields are invalid.</strong> Please correct the highlighted errors before submitting.
</div>

  <!-- Form Actions -->
  <div class="form-actions">
    <button type="submit" class="btn-success">Save</button>
    <button type="button" class="btn-secondary" (click)="cancelEdit()">Cancel</button>
  </div>
</div>


  </form>
</div>
