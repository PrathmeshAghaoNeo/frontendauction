<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3>Create New Request</h3>
    <div>
      <button class="btn btn-secondary " (click)="goBack()">Back</button>
      <button class="btn btn-secondary me-2" (click)="cancel()">Cancel</button>
      <button class="btn btn-primary" (click)="createNew()">Save</button>
 
     
    </div>
  </div>
 
  <form #formRef="ngForm">
    <div class="row">
      <div class="mb-3">
        <label>Request Number</label>
        <input type="text" class="form-control" [value]="newRequest.requestNumber" readonly>
      </div>
 
      <div class="col-md-6 mb-3">
        <label>User ID <span class="required-star">*</span></label>
        <input type="number" class="form-control" [(ngModel)]="newRequest.userId" name="userId" required #userIdRef="ngModel">
        <div class="text-danger" *ngIf="userIdRef.invalid && userIdRef.touched">User ID is required.</div>
      </div>
    </div>
 
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Username <span class="required-star">*</span></label>
        <input type="text" class="form-control" [(ngModel)]="newRequest.username" name="username" required #usernameRef="ngModel">
        <div class="text-danger" *ngIf="usernameRef.invalid && usernameRef.touched">Username is required.</div>
      </div>
 
      <div class="col-md-6 mb-3">
        <label>Mobile Number<span class="required-star">*</span></label>
        <input
          type="text"
          class="form-control"
          [(ngModel)]="newRequest.mobileNumber"
          name="mobileNumber"
          maxlength="10"
          minlength="10"
          pattern="^[0-9]{10}$"
          (keypress)="allowOnlyNumbers($event)"
          required
          #mobileNumberRef="ngModel"
        />
        <div class="text-danger" *ngIf="mobileNumberRef.invalid && mobileNumberRef.touched">
          Mobile number must be exactly 10 digits.
        </div>
      </div>
     
    </div>
 
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Email</label>
        <input
          type="email"
          class="form-control"
          [(ngModel)]="newRequest.email"
          name="email"
          required
          email
          #emailField="ngModel">
       
        <!-- Validation Message -->
        <div *ngIf="emailField.invalid && emailField.touched" class="text-danger">
          <div *ngIf="emailField.errors?.['required']">Email is required.</div>
          <div *ngIf="emailField.errors?.['email']">Please enter a valid email address.</div>
        </div>
      </div>
 
      <div class="col-md-6 mb-3">
        <label>Type <span class="required-star">*</span></label>
        <select class="form-select" [(ngModel)]="newRequest.requestTypeId" name="requestTypeId" required #requestTypeIdRef="ngModel">
          <option [value]="1">Transfer of Ownership</option>
          <option [value]="2">Inquiry</option>
          <option [value]="3">Request for Viewing</option>
          <option [value]="4">Offer</option>
        </select>
        <div class="text-danger" *ngIf="requestTypeIdRef.invalid && requestTypeIdRef.touched">Request Type is required.</div>
      </div>
    </div>
 
    <div class="row">
      <div class="col-md-6 mb-3">
        <label>Asset ID <span class="required-star">*</span></label>
        <input type="number" class="form-control" [(ngModel)]="newRequest.assetId" name="assetId" required #assetIdRef="ngModel">
        <div class="text-danger" *ngIf="assetIdRef.invalid && assetIdRef.touched">Asset ID is required.</div>
      </div>
 
      <div class="col-md-6 mb-3">
        <label>Transaction ID <span class="required-star">*</span></label>
        <input type="number" class="form-control" [(ngModel)]="newRequest.transactionId" name="transactionId" required #transactionIdRef="ngModel">
        <div class="text-danger" *ngIf="transactionIdRef.invalid && transactionIdRef.touched">Transaction ID is required.</div>
      </div>
    </div>
 
    <!-- DateTime section for startDateTime -->
    <div class="row">
      <div class="col-md-6 mb-3">
        <label for="startDateTime" class="form-label ">Start Date & Time</label>
  <input
 
    type="datetime-local"
    class="form-control dateColor"
    id="startDateTime"
    name="startDateTime"
    [(ngModel)]="newRequest.startDateTime"
    [min]="currentDateTimeStart"
    [max]="currentDateTimeEnd"
    required
    #startDateTimeRef="ngModel"
  />
  <div class="text-danger" *ngIf="startDateTimeRef.invalid && startDateTimeRef.touched">
    Time is required
  </div>
      </div>
 
      <div class="col-md-6 mb-3">
        <label>Status <span class="required-star">*</span></label>
        <select class="form-select" [(ngModel)]="newRequest.requestStatusId" name="requestStatusId" required #requestStatusIdRef="ngModel">
          <option [value]="1">Pending</option>
          <option [value]="2">Done</option>
          <option [value]="3">Approved</option>
          <option [value]="4">Rejected</option>
        </select>
        <div class="text-danger" *ngIf="requestStatusIdRef.invalid && requestStatusIdRef.touched">Status is required.</div>
      </div>
    </div>
 
    <div class="mb-3">
      <label>Customer Notes</label>
      <textarea class="form-control" rows="2" [(ngModel)]="newRequest.customerNote" name="customerNote"></textarea>
    </div>
 
    <div class="mb-3">
      <label>Admin Notes</label>
      <textarea class="form-control" rows="2" [(ngModel)]="newRequest.adminNote" name="adminNote"></textarea>
    </div>
 
    <div class="form-check mb-3">
      <input class="form-check-input" type="checkbox" [(ngModel)]="newRequest.createdByAdmin" name="createdByAdmin" id="createdByAdmin">
      <label class="form-check-label" for="createdByAdmin">
        Created by Admin
      </label>
    </div>
  </form>
</div>
 